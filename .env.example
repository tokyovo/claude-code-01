# Personal Finance Tracker - Environment Configuration
# Copy this file to .env and configure according to your environment

# =================================
# Application Configuration
# =================================
NODE_ENV=development
PORT=3001
HOST=localhost

# API Configuration
API_PREFIX=/api/v1
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100

# =================================
# Database Configuration
# =================================
# Primary Database (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=personal_finance_tracker
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false

# Test Database (for running tests)
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_NAME=personal_finance_tracker_test
TEST_DB_USER=postgres
TEST_DB_PASSWORD=postgres
TEST_DB_SSL=false

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_ACQUIRE_TIMEOUT_MS=30000
DB_CREATE_TIMEOUT_MS=30000
DB_IDLE_TIMEOUT_MS=30000

# Database Query Configuration
DB_QUERY_TIMEOUT_MS=60000
DB_STATEMENT_TIMEOUT_MS=60000

# Database Debug Configuration
DEBUG_SQL=false
LOG_QUERIES=false

# Migration Configuration
RUN_MIGRATIONS_ON_STARTUP=false
RUN_SEEDS_ON_STARTUP=false

# =================================
# Redis Configuration (Caching & Sessions)
# =================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=finance_tracker:

# Redis Connection Options
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY_ON_FAILOVER=100
REDIS_MAX_RETRIES_PER_REQUEST=3

# =================================
# Security Configuration
# =================================
# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_here_change_in_production
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=your_super_secret_refresh_key_here_change_in_production
JWT_REFRESH_EXPIRES_IN=7d

# Password Hashing
BCRYPT_ROUNDS=12

# CORS Configuration
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true

# Security Headers
ENABLE_HELMET=true
ENABLE_RATE_LIMITING=true

# =================================
# Logging Configuration
# =================================
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# Enable/Disable specific log types
LOG_HTTP_REQUESTS=true
LOG_DATABASE_QUERIES=false
LOG_ERROR_STACK_TRACES=true

# =================================
# File Upload Configuration
# =================================
UPLOAD_MAX_FILE_SIZE=5242880
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf
UPLOAD_DESTINATION=./uploads
UPLOAD_TEMP_DESTINATION=./uploads/temp

# =================================
# Email Configuration
# =================================
# SMTP Configuration for email notifications
EMAIL_HOST=
EMAIL_PORT=587
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_FROM=Personal Finance Tracker <noreply@personalfinancetracker.com>

# Email Features
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PASSWORD_RESET_EMAIL=true
ENABLE_SECURITY_ALERTS=true
EMAIL_VERIFICATION_EXPIRY=24h
PASSWORD_RESET_EXPIRY=1h

# =================================
# Backup Configuration
# =================================
# Database Backup Settings
AUTO_BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_DESTINATION=./backups
BACKUP_COMPRESSION=true

# Cloud Storage for Backups (Optional)
BACKUP_CLOUD_PROVIDER=
BACKUP_CLOUD_BUCKET=
BACKUP_CLOUD_REGION=
BACKUP_CLOUD_ACCESS_KEY=
BACKUP_CLOUD_SECRET_KEY=

# =================================
# Monitoring & Analytics
# =================================
# Application Monitoring
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_PATH=/health
METRICS_PATH=/metrics

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD_MS=1000
SLOW_REQUEST_THRESHOLD_MS=5000

# Error Tracking (Optional)
ERROR_TRACKING_DSN=
ENABLE_ERROR_TRACKING=false

# =================================
# Development Configuration
# =================================
# Development Tools
ENABLE_HOT_RELOAD=true
ENABLE_DEBUG_MIDDLEWARE=true
ENABLE_PRETTY_LOGS=true

# Development Database Seeding
SEED_SAMPLE_DATA=true
SEED_RESET_ON_RESTART=false

# =================================
# External API Configuration
# =================================
# Bank Account Integration (Optional)
PLAID_CLIENT_ID=
PLAID_SECRET=
PLAID_PUBLIC_KEY=
PLAID_ENVIRONMENT=sandbox

# Currency Exchange Rates (Optional)
EXCHANGE_RATE_API_KEY=
EXCHANGE_RATE_BASE_CURRENCY=USD
EXCHANGE_RATE_UPDATE_INTERVAL=3600000

# =================================
# Feature Flags
# =================================
ENABLE_BUDGET_ALERTS=true
ENABLE_CATEGORY_SUGGESTIONS=true
ENABLE_TRANSACTION_CATEGORIZATION=true
ENABLE_RECURRING_TRANSACTIONS=true
ENABLE_MULTI_CURRENCY=false
ENABLE_INVESTMENT_TRACKING=false
ENABLE_GOAL_TRACKING=true

# =================================
# Cache Configuration
# =================================
CACHE_DEFAULT_TTL=300
CACHE_MAX_KEYS=1000
ENABLE_QUERY_CACHE=true
ENABLE_RESPONSE_CACHE=false

# =================================
# Session Configuration
# =================================
SESSION_SECRET=your_super_secret_session_key_here_change_in_production
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# =================================
# Production-Specific Configuration
# =================================
# These settings are typically only used in production

# Database Connection Pooling (Production)
# DB_POOL_MIN=5
# DB_POOL_MAX=30
# DB_SSL=true

# Security (Production)
# CORS_ORIGIN=https://yourdomain.com
# SESSION_SECURE=true
# JWT_EXPIRES_IN=15m
# JWT_REFRESH_EXPIRES_IN=1d

# Performance (Production)
# ENABLE_COMPRESSION=true
# ENABLE_ETAG=true
# ENABLE_RESPONSE_TIME_HEADER=false

# Monitoring (Production)
# LOG_LEVEL=warn
# LOG_HTTP_REQUESTS=false
# ENABLE_DEBUG_MIDDLEWARE=false

# =================================
# Docker Configuration
# =================================
# These are used when running with Docker Compose
POSTGRES_DB=personal_finance_tracker
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# PgAdmin Configuration
PGADMIN_DEFAULT_EMAIL=admin@personalfinancetracker.com
PGADMIN_DEFAULT_PASSWORD=admin

# Redis Configuration for Docker
REDIS_CONF_PATH=./docker/redis/config/redis.conf